<pre class="ch-pre"><code class="ch-code lang-lua"><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Lua comprehensive sample demonstrating modern features</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Simple variables</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;Lua&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">version</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">5.4</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">pi</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">3.14159</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">hex_value</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">0xFF</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">scientific</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1.5e-10</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">is_active</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">nothing</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">nil</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- String types</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">single_quoted</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&#39;Hello World&#39;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">double_quoted</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;Hello Lua&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">multi_line</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">[[
This is a
multi-line string
using long brackets
]]</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">bracket_level</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">[==[
Bracket level 2
Can contain [[inner brackets]]</span><span class="tok-bracket-unmatched" style="color: #ff0000;font-weight:600">]</span><span class="tok-operator" style="color: #d73a49;font-weight:600">==</span><span class="tok-bracket-unmatched" style="color: #ff0000;font-weight:600">]</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Tables (arrays and dictionaries)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">array</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">4</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">dict</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;Alice&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">age</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">30</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">city</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;New York&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Mixed table</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">mixed</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">20</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">30</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">100</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">200</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">nested</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Table access</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">array</span><span class="tok-bracket-depth-1" style="color: #22863a">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-bracket-depth-1" style="color: #22863a">]</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Lua arrays are 1-indexed</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">dict</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">dict</span><span class="tok-bracket-depth-1" style="color: #22863a">[</span><span class="tok-string" style="color: #032f62">&quot;age&quot;</span><span class="tok-bracket-depth-1" style="color: #22863a">]</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">mixed</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">nested</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Functions</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">greet</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-string" style="color: #032f62">&quot;Hello, &quot;</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Local function</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">add</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Anonymous function</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">multiply</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Multiple return values</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">divmod</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">floor</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-operator" style="color: #d73a49;font-weight:600">/</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-operator" style="color: #d73a49;font-weight:600">%</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">quotient</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">remainder</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">divmod</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">17</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Varargs</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">sum</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-operator" style="color: #d73a49;font-weight:600">...</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">args</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-operator" style="color: #d73a49;font-weight:600">...</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">total</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">#</span><span class="tok-identifier" style="color: #24292e">args</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-identifier" style="color: #24292e">total</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">total</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-identifier" style="color: #24292e">args</span><span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">total</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">sum</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">4</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- String concatenation</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">greeting</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;Hello&quot;</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-string" style="color: #032f62">&quot; &quot;</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-string" style="color: #032f62">&quot;World&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">repeated</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;Ha&quot;</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-string" style="color: #032f62">&quot;Ha&quot;</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-string" style="color: #032f62">&quot;Ha&quot;</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Length operator</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">text</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;Hello&quot;</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">#</span><span class="tok-identifier" style="color: #24292e">text</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- 5</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">20</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">30</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">#</span><span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- 3</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Arithmetic operators</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">c</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">d</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-operator" style="color: #d73a49;font-weight:600">/</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">e</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-operator" style="color: #d73a49;font-weight:600">%</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">f</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-operator" style="color: #d73a49;font-weight:600">^</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Exponentiation</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">g</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">17</span><span class="tok-operator" style="color: #d73a49;font-weight:600">//</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Floor division (Lua 5.3+)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Bitwise operators (Lua 5.3+)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">bit_and</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">12</span><span class="tok-punctuation" style="color: #24292e">&amp;</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">bit_or</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">12</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">bit_xor</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">12</span><span class="tok-identifier" style="color: #24292e">~</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">bit_not</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">~</span><span class="tok-number" style="color: #005cc5">12</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">left_shift</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">&lt;&lt;</span><span class="tok-number" style="color: #005cc5">4</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">right_shift</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">16</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">&gt;&gt;</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Comparison operators</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">equals</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-operator" style="color: #d73a49;font-weight:600">==</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">not_equals</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-identifier" style="color: #24292e">~=</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">less</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&lt;</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">greater</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&gt;</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">less_equal</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&lt;=</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">greater_equal</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&gt;=</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Logical operators</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">and_result</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span><span class="tok-operator" style="color: #d73a49;font-weight:600">and</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">false</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">or_result</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span><span class="tok-operator" style="color: #d73a49;font-weight:600">or</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">false</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">not_result</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-operator" style="color: #d73a49;font-weight:600">not</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Conditional statements</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">version</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&gt;=</span><span class="tok-number" style="color: #005cc5">5.4</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Modern Lua&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">elseif</span><span class="tok-identifier" style="color: #24292e">version</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&gt;=</span><span class="tok-number" style="color: #005cc5">5.1</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Older Lua&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Ancient Lua&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Ternary-like with and/or</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">status</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">age</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&gt;=</span><span class="tok-number" style="color: #005cc5">18</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-operator" style="color: #d73a49;font-weight:600">and</span><span class="tok-string" style="color: #032f62">&quot;adult&quot;</span><span class="tok-operator" style="color: #d73a49;font-weight:600">or</span><span class="tok-string" style="color: #032f62">&quot;minor&quot;</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- While loop</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">while</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&lt;=</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Repeat-until loop</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">j</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">repeat</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">j</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">j</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">j</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-identifier" style="color: #24292e">until</span><span class="tok-identifier" style="color: #24292e">j</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&gt;</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Numeric for loop</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Numeric for loop with step</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Generic for loop</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">index</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">in</span><span class="tok-identifier" style="color: #24292e">ipairs</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">array</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">index</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Iterator over table keys</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">in</span><span class="tok-identifier" style="color: #24292e">pairs</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">dict</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Break statement</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">100</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&gt;</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">break</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Goto (Lua 5.2+)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-operator" style="color: #d73a49;font-weight:600">%</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-operator" style="color: #d73a49;font-weight:600">==</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">goto</span><span class="tok-identifier" style="color: #24292e">continue</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-operator" style="color: #d73a49;font-weight:600">::</span><span class="tok-identifier" style="color: #24292e">continue</span><span class="tok-operator" style="color: #d73a49;font-weight:600">::</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Tables as objects</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">person</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-identifier" style="color: #24292e">first_name</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;John&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">last_name</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;Doe&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">age</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">30</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">person</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">full_name</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">person</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">first_name</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-string" style="color: #032f62">&quot; &quot;</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-identifier" style="color: #24292e">person</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">last_name</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">person</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">birthday</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">age</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">age</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Colon syntax for methods (implicit self)</span><span class="tok-identifier" style="color: #24292e">person</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">birthday</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Metatables</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">vector</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">20</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">vector_mt</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-identifier" style="color: #24292e">__add</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">v1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">v2</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">v1</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-identifier" style="color: #24292e">v2</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">v1</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-identifier" style="color: #24292e">v2</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">__sub</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">v1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">v2</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">v1</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-identifier" style="color: #24292e">v2</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">v1</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-identifier" style="color: #24292e">v2</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">__tostring</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">v</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-string" style="color: #032f62">&quot;(&quot;</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-identifier" style="color: #24292e">v</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-string" style="color: #032f62">&quot;, &quot;</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-identifier" style="color: #24292e">v</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-string" style="color: #032f62">&quot;)&quot;</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">__index</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-operator" style="color: #d73a49;font-weight:600">==</span><span class="tok-string" style="color: #032f62">&quot;magnitude&quot;</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">sqrt</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-operator" style="color: #d73a49;font-weight:600">^</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-operator" style="color: #d73a49;font-weight:600">^</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">setmetatable</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">vector</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">vector_mt</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">v1</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">v2</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">4</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">setmetatable</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">v1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">vector_mt</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">setmetatable</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">v2</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">vector_mt</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">v3</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">v1</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-identifier" style="color: #24292e">v2</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Class-like pattern with metatables</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">create_account</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">balance</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-identifier" style="color: #24292e">balance</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">balance</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">mt</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-identifier" style="color: #24292e">__index</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-identifier" style="color: #24292e">deposit</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-2" style="color: #6f42c1">(</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">amount</span><span class="tok-bracket-depth-2" style="color: #6f42c1">)</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">balance</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">balance</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-identifier" style="color: #24292e">amount</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">withdraw</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-2" style="color: #6f42c1">(</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">amount</span><span class="tok-bracket-depth-2" style="color: #6f42c1">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">amount</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&lt;=</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">balance</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">balance</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">balance</span><span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-identifier" style="color: #24292e">amount</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">false</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">get_balance</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-2" style="color: #6f42c1">(</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-bracket-depth-2" style="color: #6f42c1">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">balance</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">setmetatable</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">mt</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">account</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">create_account</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">100</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">account</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">deposit</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">50</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">account</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">withdraw</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">30</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">account</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">get_balance</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Closures</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">make_counter</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">count</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">count</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">count</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">count</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">counter1</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">make_counter</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">counter2</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">make_counter</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">counter1</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- 1</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">counter1</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- 2</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">counter2</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- 1</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Module pattern</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">math_utils</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">math_utils</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">square</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">math_utils</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">cube</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">math_utils</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">factorial</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&lt;=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-identifier" style="color: #24292e">math_utils</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">factorial</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Error handling</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">safe_divide</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-operator" style="color: #d73a49;font-weight:600">==</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-identifier" style="color: #24292e">error</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Division by zero&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-operator" style="color: #d73a49;font-weight:600">/</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">success</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">result</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">pcall</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">safe_divide</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">success</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Result:&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">result</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Error:&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">result</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Custom error with level</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">validate_age</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">age</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">age</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">~=</span><span class="tok-string" style="color: #032f62">&quot;number&quot;</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-identifier" style="color: #24292e">error</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Age must be a number&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">age</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&lt;</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-identifier" style="color: #24292e">error</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Age must be positive&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">age</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Assert</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">process</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">assert</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-identifier" style="color: #24292e">~=</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">nil</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;Value cannot be nil&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">assert</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-operator" style="color: #d73a49;font-weight:600">==</span><span class="tok-string" style="color: #032f62">&quot;number&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;Value must be a number&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- String library</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">str</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;Hello World&quot;</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">upper</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">str</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">lower</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">str</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">len</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">str</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">sub</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">str</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">reverse</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-identifier" style="color: #24292e">str</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">rep</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-string" style="color: #032f62">&quot;Ha&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- String pattern matching</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">text</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;The quick brown fox&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">pattern</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;quick&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">found</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">find</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">text</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">pattern</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">matched</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">match</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">text</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;quick&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">replaced</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">gsub</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">text</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;fox&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;dog&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Pattern classes</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">digits</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">match</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;abc123def&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;%d+&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">letters</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">match</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;abc123def&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;%a+&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- String formatting</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">formatted</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">format</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Pi is approximately %.2f&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">pi</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">formatted2</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">format</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Name: %s, Age: %d&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;Alice&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">30</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Table library</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">fruits</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-string" style="color: #032f62">&quot;apple&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;banana&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;cherry&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">table</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">insert</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">fruits</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;date&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">table</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">insert</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">fruits</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;blueberry&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">removed</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">table</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">remove</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">fruits</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">removed_at</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">table</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">remove</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">fruits</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">table</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">sort</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">fruits</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">joined</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">table</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">concat</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">fruits</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;, &quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Math library</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">abs_val</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">abs</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">ceil_val</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">ceil</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">3.2</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">floor_val</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">floor</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">3.8</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">max_val</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">max</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">20</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">15</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">min_val</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">min</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">20</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">15</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">random</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">random</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">random_range</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">random</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">100</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">sqrt_val</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">sqrt</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">16</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">sin_val</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">sin</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">pi</span><span class="tok-operator" style="color: #d73a49;font-weight:600">/</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">cos_val</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">math</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">cos</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- IO library</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- local file = io.open(&quot;test.txt&quot;, &quot;w&quot;)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- file:write(&quot;Hello Lua\n&quot;)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- file:close()</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- local file = io.open(&quot;test.txt&quot;, &quot;r&quot;)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- local content = file:read(&quot;*all&quot;)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- file:close()</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- OS library</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">current_time</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">os</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">time</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">date_table</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">os</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">date</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;*t&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">current_time</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">formatted_date</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">os</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">date</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">current_time</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- local exit_code = os.execute(&quot;ls -la&quot;)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Type checking</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">t1</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- &quot;number&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">t2</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;hello&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- &quot;string&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">t3</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- &quot;table&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">t4</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- &quot;function&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">t5</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- &quot;boolean&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">t6</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">nil</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- &quot;nil&quot;</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Pairs and ipairs</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">data</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">20</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">30</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">100</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">200</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">v</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">in</span><span class="tok-identifier" style="color: #24292e">ipairs</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">data</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Only array part</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">v</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">v</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">in</span><span class="tok-identifier" style="color: #24292e">pairs</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">data</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- All keys</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">v</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Next function</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">c</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">nil</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">repeat</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">next</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-bracket-depth-1" style="color: #22863a">[</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-bracket-depth-1" style="color: #22863a">]</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">until</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-operator" style="color: #d73a49;font-weight:600">==</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">nil</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Select function</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">first</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-operator" style="color: #d73a49;font-weight:600">...</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">select</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-operator" style="color: #d73a49;font-weight:600">...</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">count_args</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-operator" style="color: #d73a49;font-weight:600">...</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">select</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;#&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-operator" style="color: #d73a49;font-weight:600">...</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Rawget and rawset (bypass metamethods)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">raw_table</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">setmetatable</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">raw_table</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-identifier" style="color: #24292e">__index</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-2" style="color: #6f42c1">(</span><span class="tok-bracket-depth-2" style="color: #6f42c1">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-string" style="color: #032f62">&quot;default&quot;</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">normal_get</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">raw_table</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- &quot;default&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">raw_get</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">rawget</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">raw_table</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;key&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- nil</span><span class="tok-identifier" style="color: #24292e">rawset</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">raw_table</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;key&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;value&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Load and loadstring</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">code</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;return 2 + 2&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">func</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">load</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">code</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">result</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">func</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Coroutines</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">fibonacci</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">while</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-identifier" style="color: #24292e">coroutine</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">yield</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">co</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">coroutine</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">create</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">fibonacci</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">success</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">coroutine</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">resume</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">co</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Weak tables</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">weak_table</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">setmetatable</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-identifier" style="color: #24292e">__mode</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;k&quot;</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Package system</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- require(&quot;module_name&quot;)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- local my_module = require(&quot;my_module&quot;)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Global vs local</span><span class="tok-identifier" style="color: #24292e">global_var</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;I am global&quot;</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">local_var</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-string" style="color: #032f62">&quot;I am local&quot;</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Multiple assignment</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">z</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">20</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">30</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Swap</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Unpack (table.unpack in Lua 5.2+)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">coords</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">20</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">30</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">x1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">y1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">z1</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">table</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">unpack</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">coords</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Complex table manipulation</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">matrix</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-number" style="color: #005cc5">4</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">6</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-number" style="color: #005cc5">7</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">8</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-number" style="color: #005cc5">9</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">#</span><span class="tok-identifier" style="color: #24292e">matrix</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span><span class="tok-identifier" style="color: #24292e">j</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">#</span><span class="tok-identifier" style="color: #24292e">matrix</span><span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span><span class="tok-identifier" style="color: #24292e">do</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">matrix</span><span class="tok-bracket-depth-1" style="color: #22863a">[</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-bracket-depth-1" style="color: #22863a">]</span><span class="tok-bracket-depth-1" style="color: #22863a">[</span><span class="tok-identifier" style="color: #24292e">j</span><span class="tok-bracket-depth-1" style="color: #22863a">]</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Object-oriented programming example</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">Animal</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span><span class="tok-identifier" style="color: #24292e">Animal</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">__index</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">Animal</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">Animal</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">new</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">sound</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">instance</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">setmetatable</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">instance</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-identifier" style="color: #24292e">instance</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">sound</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">sound</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">instance</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">Animal</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">speak</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-string" style="color: #032f62">&quot; says &quot;</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">sound</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">Dog</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">setmetatable</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">Animal</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">Dog</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">__index</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">Dog</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">Dog</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">new</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">instance</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">Animal</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&quot;Woof&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">instance</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">Dog</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">fetch</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-string" style="color: #032f62">&quot; is fetching&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">dog</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">Dog</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">new</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Buddy&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">dog</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">speak</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">dog</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-identifier" style="color: #24292e">fetch</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Tail call optimization</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">tail_recursive_sum</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">acc</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">acc</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">acc</span><span class="tok-operator" style="color: #d73a49;font-weight:600">or</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&lt;=</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">then</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">acc</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">tail_recursive_sum</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-identifier" style="color: #24292e">acc</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- Upvalues and closures</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-identifier" style="color: #24292e">create_incrementor</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">step</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-function" style="color: #6f42c1;font-weight:600">function</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-identifier" style="color: #24292e">step</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">inc_by_5</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">create_incrementor</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">local</span><span class="tok-identifier" style="color: #24292e">inc_by_10</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-identifier" style="color: #24292e">create_incrementor</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">inc_by_5</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- 15</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">inc_by_10</span><span class="tok-bracket-depth-1" style="color: #22863a">(</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-bracket-depth-1" style="color: #22863a">)</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span><span class="tok-comment" style="color: #6a737d;font-style:italic">-- 20</span><span class="tok-identifier" style="color: #24292e">print</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;Lua sample complete!&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span></code></pre>