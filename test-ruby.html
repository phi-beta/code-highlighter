<pre class="ch-pre"><code class="ch-code lang-ruby"><span class="tok-comment" style="color: #6a737d;font-style:italic"># Ruby comprehensive sample demonstrating modern features</span>

<span class="tok-identifier" style="color: #24292e">require</span> <span class="tok-string" style="color: #032f62">&#39;json&#39;</span>
<span class="tok-identifier" style="color: #24292e">require_relative</span> <span class="tok-string" style="color: #032f62">&#39;helper&#39;</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Class with inheritance and mixins</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">class</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Animal</span>
  <span class="tok-identifier" style="color: #24292e">attr_accessor</span> <span class="tok-string" style="color: #032f62">:name</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">:age</span>
  <span class="tok-identifier" style="color: #24292e">attr_reader</span> <span class="tok-string" style="color: #032f62">:species</span>
  
  <span class="tok-variable" style="color: #e36209">@@count</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">0</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">initialize</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">age</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">species</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-variable" style="color: #e36209">@name</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">name</span>
    <span class="tok-variable" style="color: #e36209">@age</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">age</span>
    <span class="tok-variable" style="color: #e36209">@species</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">species</span>
    <span class="tok-variable" style="color: #e36209">@@count</span> <span class="tok-identifier" style="color: #24292e">+=</span> <span class="tok-number" style="color: #005cc5">1</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">total_count</span>
    <span class="tok-variable" style="color: #e36209">@@count</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">speak</span>
    <span class="tok-identifier" style="color: #24292e">raise</span> <span class="tok-type" style="color: #005cc5;font-weight:600">NotImplementedError</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">&#39;Subclasses must implement speak&#39;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">description</span>
    <span class="tok-string" style="color: #032f62">&quot;#{@name} is a #{@age}-year-old #{@species}&quot;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Module for mixins</span>
<span class="tok-identifier" style="color: #24292e">module</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Flyable</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">fly</span>
    <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;#{name} is flying!&quot;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">altitude</span><span class="tok-identifier" style="color: #24292e">=</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-variable" style="color: #e36209">@altitude</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">value</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">altitude</span>
    <span class="tok-variable" style="color: #e36209">@altitude</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">||</span> <span class="tok-number" style="color: #005cc5">0</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Class with mixin</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">class</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Bird</span> <span class="tok-identifier" style="color: #24292e">&lt;</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Animal</span>
  <span class="tok-identifier" style="color: #24292e">include</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Flyable</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">initialize</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">age</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">super</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">age</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">&#39;bird&#39;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">speak</span>
    <span class="tok-string" style="color: #032f62">&#39;Chirp chirp!&#39;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Struct for simple data structures</span>
<span class="tok-type" style="color: #005cc5;font-weight:600">Person</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Struct</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">:first_name</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">:last_name</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">:age</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span> <span class="tok-identifier" style="color: #24292e">do</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">full_name</span>
    <span class="tok-string" style="color: #032f62">&quot;#{first_name} #{last_name}&quot;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">adult?</span>
    <span class="tok-identifier" style="color: #24292e">age</span> <span class="tok-identifier" style="color: #24292e">&gt;=</span> <span class="tok-number" style="color: #005cc5">18</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Symbol literals</span>
<span class="tok-identifier" style="color: #24292e">status_pending</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">:pending</span>
<span class="tok-identifier" style="color: #24292e">status_completed</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">:completed</span>
<span class="tok-identifier" style="color: #24292e">symbols_hash</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-identifier" style="color: #24292e">success</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">message</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;Done&#39;</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># String interpolation</span>
<span class="tok-identifier" style="color: #24292e">name</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;Ruby&#39;</span>
<span class="tok-identifier" style="color: #24292e">version</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">3.2</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Welcome to #{name} #{version}&quot;</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Math: 2 + 2 = #{2 + 2}&quot;</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Multi-line strings</span>
<span class="tok-identifier" style="color: #24292e">multi_line</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&lt;&lt;~HEREDOC
  This is a
  multi-line string
  with heredoc
HEREDOC</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Regular expressions</span>
<span class="tok-identifier" style="color: #24292e">email_regex</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">/^[\w+\-.]+@[a-z\d\-]+(\.[a-z\d\-]+)*\.[a-z]+$/i</span>
<span class="tok-identifier" style="color: #24292e">phone_regex</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">%</span><span class="tok-identifier" style="color: #24292e">r</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-operator" style="color: #d73a49;font-weight:600">^</span><span class="tok-identifier" style="color: #24292e">d</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-identifier" style="color: #24292e">d</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-identifier" style="color: #24292e">d</span><span class="tok-bracket-depth-1" style="color: #22863a">{</span><span class="tok-number" style="color: #005cc5">4</span><span class="tok-bracket-depth-1" style="color: #22863a">}</span><span class="tok-identifier" style="color: #24292e">$</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-string" style="color: #032f62">&#39;test@example.com&#39;</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">=~</span> <span class="tok-identifier" style="color: #24292e">email_regex</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Valid email&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Percent literals</span>
<span class="tok-identifier" style="color: #24292e">words</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">%</span><span class="tok-identifier" style="color: #24292e">w</span><span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-identifier" style="color: #24292e">apple</span> <span class="tok-identifier" style="color: #24292e">banana</span> <span class="tok-identifier" style="color: #24292e">cherry</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
<span class="tok-identifier" style="color: #24292e">symbols</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">%</span><span class="tok-identifier" style="color: #24292e">i</span><span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-identifier" style="color: #24292e">red</span> <span class="tok-identifier" style="color: #24292e">green</span> <span class="tok-identifier" style="color: #24292e">blue</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
<span class="tok-identifier" style="color: #24292e">shell_command</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">%</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-bracket-depth-0" style="color: #d73a49">{</span><span class="tok-identifier" style="color: #24292e">ls</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-identifier" style="color: #24292e">la</span><span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Arrays and ranges</span>
<span class="tok-identifier" style="color: #24292e">numbers</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">4</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
<span class="tok-identifier" style="color: #24292e">range</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
<span class="tok-identifier" style="color: #24292e">exclusive_range</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-operator" style="color: #d73a49;font-weight:600">...</span><span class="tok-number" style="color: #005cc5">10</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Array operations</span>
<span class="tok-identifier" style="color: #24292e">doubled</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">map</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span> <span class="tok-number" style="color: #005cc5">2</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">evens</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">select</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">even?</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">sum</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">reduce</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">acc</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">acc</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">+</span> <span class="tok-identifier" style="color: #24292e">n</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">sum_shorthand</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">reduce</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Hash</span>
<span class="tok-identifier" style="color: #24292e">person</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span>
  <span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;Alice&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span>
  <span class="tok-identifier" style="color: #24292e">age</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-number" style="color: #005cc5">30</span><span class="tok-punctuation" style="color: #24292e">,</span>
  <span class="tok-identifier" style="color: #24292e">city</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;New York&#39;</span>
<span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Hash with string keys</span>
<span class="tok-identifier" style="color: #24292e">config</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span>
  <span class="tok-string" style="color: #032f62">&#39;host&#39;</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">=&gt;</span> <span class="tok-string" style="color: #032f62">&#39;localhost&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span>
  <span class="tok-string" style="color: #032f62">&#39;port&#39;</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">=&gt;</span> <span class="tok-number" style="color: #005cc5">3000</span><span class="tok-punctuation" style="color: #24292e">,</span>
  <span class="tok-string" style="color: #032f62">&#39;debug&#39;</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">=&gt;</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span>
<span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Blocks and iterators</span>
<span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">each</span> <span class="tok-identifier" style="color: #24292e">do</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">n</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Single-line block</span>
<span class="tok-identifier" style="color: #24292e">squares</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">map</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">**</span> <span class="tok-number" style="color: #005cc5">2</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Block with multiple parameters</span>
<span class="tok-identifier" style="color: #24292e">hash</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-identifier" style="color: #24292e">a</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">b</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">c</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-number" style="color: #005cc5">3</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">hash</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">each</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">key</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">value</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;#{key}: #{value}&quot;</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Proc and Lambda</span>
<span class="tok-identifier" style="color: #24292e">my_proc</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Proc</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">x</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span> <span class="tok-number" style="color: #005cc5">2</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">my_lambda</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-identifier" style="color: #24292e">&gt;</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-identifier" style="color: #24292e">x</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span> <span class="tok-number" style="color: #005cc5">2</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">lambda_alt</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">lambda</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">x</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span> <span class="tok-number" style="color: #005cc5">2</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">my_proc</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">call</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">my_lambda</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">call</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Method definition with default parameters</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">greet</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">greeting</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;Hello&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">punctuation</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;!&#39;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
  <span class="tok-string" style="color: #032f62">&quot;#{greeting}, #{name}#{punctuation}&quot;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">greet</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&#39;World&#39;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">greet</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&#39;Ruby&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">greeting</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;Hi&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">punctuation</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;!!&#39;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Splat operator</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">sum_all</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
  <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">reduce</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">sum_all</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">4</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Double splat for keyword arguments</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">configure</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-operator" style="color: #d73a49;font-weight:600">**</span><span class="tok-identifier" style="color: #24292e">options</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
  <span class="tok-identifier" style="color: #24292e">options</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">each</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">k</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">v</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;#{k} = #{v}&quot;</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-identifier" style="color: #24292e">configure</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">host</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;localhost&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">port</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-number" style="color: #005cc5">3000</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">debug</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Conditional statements</span>
<span class="tok-identifier" style="color: #24292e">age</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">25</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-identifier" style="color: #24292e">age</span> <span class="tok-identifier" style="color: #24292e">&gt;=</span> <span class="tok-number" style="color: #005cc5">18</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Adult&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">elsif</span> <span class="tok-identifier" style="color: #24292e">age</span> <span class="tok-identifier" style="color: #24292e">&gt;=</span> <span class="tok-number" style="color: #005cc5">13</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Teenager&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Child&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Unless statement</span>
<span class="tok-identifier" style="color: #24292e">unless</span> <span class="tok-identifier" style="color: #24292e">age</span> <span class="tok-identifier" style="color: #24292e">&lt;</span> <span class="tok-number" style="color: #005cc5">18</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Can vote&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Ternary operator</span>
<span class="tok-identifier" style="color: #24292e">status</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">age</span> <span class="tok-identifier" style="color: #24292e">&gt;=</span> <span class="tok-number" style="color: #005cc5">18</span> <span class="tok-punctuation" style="color: #24292e">?</span> <span class="tok-string" style="color: #032f62">&#39;adult&#39;</span> <span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;minor&#39;</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Case statement</span>
<span class="tok-identifier" style="color: #24292e">grade</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;B&#39;</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">case</span> <span class="tok-identifier" style="color: #24292e">grade</span>
<span class="tok-identifier" style="color: #24292e">when</span> <span class="tok-string" style="color: #032f62">&#39;A&#39;</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Excellent&#39;</span>
<span class="tok-identifier" style="color: #24292e">when</span> <span class="tok-string" style="color: #032f62">&#39;B&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">&#39;C&#39;</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Good&#39;</span>
<span class="tok-identifier" style="color: #24292e">when</span> <span class="tok-string" style="color: #032f62">&#39;D&#39;</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Pass&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Fail&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Case with ranges</span>
<span class="tok-identifier" style="color: #24292e">score</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">85</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">case</span> <span class="tok-identifier" style="color: #24292e">score</span>
<span class="tok-identifier" style="color: #24292e">when</span> <span class="tok-number" style="color: #005cc5">90</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-number" style="color: #005cc5">100</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;A&#39;</span>
<span class="tok-identifier" style="color: #24292e">when</span> <span class="tok-number" style="color: #005cc5">80</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-number" style="color: #005cc5">89</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;B&#39;</span>
<span class="tok-identifier" style="color: #24292e">when</span> <span class="tok-number" style="color: #005cc5">70</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-number" style="color: #005cc5">79</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;C&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;F&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Loops</span>
<span class="tok-identifier" style="color: #24292e">i</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">0</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">while</span> <span class="tok-identifier" style="color: #24292e">i</span> <span class="tok-identifier" style="color: #24292e">&lt;</span> <span class="tok-number" style="color: #005cc5">5</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">i</span>
  <span class="tok-identifier" style="color: #24292e">i</span> <span class="tok-identifier" style="color: #24292e">+=</span> <span class="tok-number" style="color: #005cc5">1</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-identifier" style="color: #24292e">until</span> <span class="tok-identifier" style="color: #24292e">i</span> <span class="tok-identifier" style="color: #24292e">&gt;=</span> <span class="tok-number" style="color: #005cc5">10</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">i</span>
  <span class="tok-identifier" style="color: #24292e">i</span> <span class="tok-identifier" style="color: #24292e">+=</span> <span class="tok-number" style="color: #005cc5">1</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># For loop</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span> <span class="tok-identifier" style="color: #24292e">num</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">in</span> <span class="tok-number" style="color: #005cc5">1</span><span class="tok-operator" style="color: #d73a49;font-weight:600">..</span><span class="tok-number" style="color: #005cc5">5</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">num</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Loop with break and next</span>
<span class="tok-identifier" style="color: #24292e">loop</span> <span class="tok-identifier" style="color: #24292e">do</span>
  <span class="tok-identifier" style="color: #24292e">i</span> <span class="tok-identifier" style="color: #24292e">+=</span> <span class="tok-number" style="color: #005cc5">1</span>
  <span class="tok-identifier" style="color: #24292e">next</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-identifier" style="color: #24292e">i</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">even?</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">break</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-identifier" style="color: #24292e">i</span> <span class="tok-identifier" style="color: #24292e">&gt;</span> <span class="tok-number" style="color: #005cc5">20</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">i</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Error handling</span>
<span class="tok-identifier" style="color: #24292e">begin</span>
  <span class="tok-identifier" style="color: #24292e">result</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">10</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">/</span> <span class="tok-number" style="color: #005cc5">0</span>
<span class="tok-identifier" style="color: #24292e">rescue</span> <span class="tok-type" style="color: #005cc5;font-weight:600">ZeroDivisionError</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">=&gt;</span> <span class="tok-identifier" style="color: #24292e">e</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Error: #{e.message}&quot;</span>
<span class="tok-identifier" style="color: #24292e">rescue</span> <span class="tok-type" style="color: #005cc5;font-weight:600">StandardError</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">=&gt;</span> <span class="tok-identifier" style="color: #24292e">e</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Unexpected error: #{e.message}&quot;</span>
<span class="tok-identifier" style="color: #24292e">ensure</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Cleanup code&quot;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Raise exception</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">validate_age</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">age</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
  <span class="tok-identifier" style="color: #24292e">raise</span> <span class="tok-type" style="color: #005cc5;font-weight:600">ArgumentError</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">&#39;Age must be positive&#39;</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-identifier" style="color: #24292e">age</span> <span class="tok-identifier" style="color: #24292e">&lt;</span> <span class="tok-number" style="color: #005cc5">0</span>
  <span class="tok-identifier" style="color: #24292e">raise</span> <span class="tok-type" style="color: #005cc5;font-weight:600">ArgumentError</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">&#39;Age must be reasonable&#39;</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-identifier" style="color: #24292e">age</span> <span class="tok-identifier" style="color: #24292e">&gt;</span> <span class="tok-number" style="color: #005cc5">150</span>
  <span class="tok-identifier" style="color: #24292e">age</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Retry mechanism</span>
<span class="tok-identifier" style="color: #24292e">attempts</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">0</span>
<span class="tok-identifier" style="color: #24292e">begin</span>
  <span class="tok-identifier" style="color: #24292e">attempts</span> <span class="tok-identifier" style="color: #24292e">+=</span> <span class="tok-number" style="color: #005cc5">1</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Attempt #{attempts}&quot;</span>
  <span class="tok-identifier" style="color: #24292e">raise</span> <span class="tok-string" style="color: #032f62">&#39;Random error&#39;</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-identifier" style="color: #24292e">rand</span> <span class="tok-identifier" style="color: #24292e">&lt;</span> <span class="tok-number" style="color: #005cc5">0.7</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Success!&#39;</span>
<span class="tok-identifier" style="color: #24292e">rescue</span>
  <span class="tok-identifier" style="color: #24292e">retry</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-identifier" style="color: #24292e">attempts</span> <span class="tok-identifier" style="color: #24292e">&lt;</span> <span class="tok-number" style="color: #005cc5">3</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Failed after 3 attempts&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Method visibility</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">class</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Example</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">public_method</span>
    <span class="tok-string" style="color: #032f62">&#39;Public&#39;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-operator" style="color: #d73a49;font-weight:600">private</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">private_method</span>
    <span class="tok-string" style="color: #032f62">&#39;Private&#39;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-operator" style="color: #d73a49;font-weight:600">protected</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">protected_method</span>
    <span class="tok-string" style="color: #032f62">&#39;Protected&#39;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Class methods and instance methods</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">class</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Calculator</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">add</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">b</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-identifier" style="color: #24292e">a</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">+</span> <span class="tok-identifier" style="color: #24292e">b</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">multiply</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">a</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">b</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-identifier" style="color: #24292e">a</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span> <span class="tok-identifier" style="color: #24292e">b</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Calculator</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">add</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
<span class="tok-identifier" style="color: #24292e">calc</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Calculator</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">calc</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">multiply</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">5</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Singleton methods</span>
<span class="tok-identifier" style="color: #24292e">obj</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Object</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">obj</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">special_method</span>
  <span class="tok-string" style="color: #032f62">&#39;This is a singleton method&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">obj</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">special_method</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Method aliasing</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">class</span> <span class="tok-type" style="color: #005cc5;font-weight:600">String</span>
  <span class="tok-identifier" style="color: #24292e">alias_method</span> <span class="tok-string" style="color: #032f62">:original_reverse</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">:reverse</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">reverse</span>
    <span class="tok-string" style="color: #032f62">&quot;Reversed: #{original_reverse}&quot;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Global variables</span>
<span class="tok-variable" style="color: #e36209">$global_var</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;I am global&#39;</span>
<span class="tok-variable" style="color: #e36209">$stdin</span>
<span class="tok-variable" style="color: #e36209">$stdout</span>
<span class="tok-variable" style="color: #e36209">$stderr</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Special global variables</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">$</span><span class="tok-number" style="color: #005cc5">0</span>          <span class="tok-comment" style="color: #6a737d;font-style:italic"># Current script name</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">__FILE__</span>    <span class="tok-comment" style="color: #6a737d;font-style:italic"># Current file name</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">__LINE__</span>    <span class="tok-comment" style="color: #6a737d;font-style:italic"># Current line number</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Constants</span>
<span class="tok-type" style="color: #005cc5;font-weight:600">PI</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">3.14159</span>
<span class="tok-type" style="color: #005cc5;font-weight:600">MAX_SIZE</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">100</span>

<span class="tok-identifier" style="color: #24292e">module</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Constants</span>
  <span class="tok-type" style="color: #005cc5;font-weight:600">VERSION</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;1.0.0&#39;</span>
  <span class="tok-type" style="color: #005cc5;font-weight:600">API_URL</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;https://api.example.com&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Class variables vs instance variables</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">class</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Counter</span>
  <span class="tok-variable" style="color: #e36209">@@class_count</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">0</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">initialize</span>
    <span class="tok-variable" style="color: #e36209">@instance_count</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">0</span>
    <span class="tok-variable" style="color: #e36209">@@class_count</span> <span class="tok-identifier" style="color: #24292e">+=</span> <span class="tok-number" style="color: #005cc5">1</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">increment</span>
    <span class="tok-variable" style="color: #e36209">@instance_count</span> <span class="tok-identifier" style="color: #24292e">+=</span> <span class="tok-number" style="color: #005cc5">1</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">self</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">class_count</span>
    <span class="tok-variable" style="color: #e36209">@@class_count</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">instance_count</span>
    <span class="tok-variable" style="color: #e36209">@instance_count</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Method chaining</span>
<span class="tok-identifier" style="color: #24292e">result</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">4</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
  <span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">map</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span> <span class="tok-number" style="color: #005cc5">2</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
  <span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">select</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span> <span class="tok-identifier" style="color: #24292e">&gt;</span> <span class="tok-number" style="color: #005cc5">5</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
  <span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">reduce</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Safe navigation operator</span>
<span class="tok-identifier" style="color: #24292e">user</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">nil</span>
<span class="tok-identifier" style="color: #24292e">city</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">user</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&amp;.</span><span class="tok-identifier" style="color: #24292e">address</span><span class="tok-operator" style="color: #d73a49;font-weight:600">&amp;.</span><span class="tok-identifier" style="color: #24292e">city</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Hash default values</span>
<span class="tok-identifier" style="color: #24292e">hash_with_default</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Hash</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">0</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
<span class="tok-identifier" style="color: #24292e">hash_with_default</span><span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-string" style="color: #032f62">:count</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span> <span class="tok-identifier" style="color: #24292e">+=</span> <span class="tok-number" style="color: #005cc5">1</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># String methods</span>
<span class="tok-identifier" style="color: #24292e">text</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;hello world&#39;</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">text</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">upcase</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">text</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">capitalize</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">text</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">reverse</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">text</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">include?</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&#39;world&#39;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">text</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">split</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&#39; &#39;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Array methods</span>
<span class="tok-identifier" style="color: #24292e">arr</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">4</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">arr</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">first</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">arr</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">last</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">arr</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">length</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">arr</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">empty?</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">arr</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">include?</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">arr</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">join</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&#39;, &#39;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Enumerable methods</span>
<span class="tok-identifier" style="color: #24292e">numbers</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">4</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">5</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">6</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>

<span class="tok-identifier" style="color: #24292e">all_positive</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">all?</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span> <span class="tok-identifier" style="color: #24292e">&gt;</span> <span class="tok-number" style="color: #005cc5">0</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">any_even</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">any?</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">even?</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">none_negative</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">none?</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span> <span class="tok-identifier" style="color: #24292e">&lt;</span> <span class="tok-number" style="color: #005cc5">0</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">first_even</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">find</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">even?</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">evens_only</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">select</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">even?</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-identifier" style="color: #24292e">odds_only</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">numbers</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">reject</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">even?</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Zip and transpose</span>
<span class="tok-identifier" style="color: #24292e">a</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
<span class="tok-identifier" style="color: #24292e">b</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-string" style="color: #032f62">&#39;a&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">&#39;b&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">&#39;c&#39;</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
<span class="tok-identifier" style="color: #24292e">zipped</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">a</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">zip</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">b</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Pattern matching (Ruby 3.0+)</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">case</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">in</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;Exact match&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">in</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;First and last match&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&#39;No match&#39;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Hash pattern matching</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">case</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;Alice&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">age</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-number" style="color: #005cc5">30</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">in</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;Alice&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">age</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
  <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Alice is #{age} years old&quot;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Endless method definition (Ruby 3.0+)</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">square</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">x</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span> <span class="tok-identifier" style="color: #24292e">x</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Numbered parameters</span>
<span class="tok-identifier" style="color: #24292e">result</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">map</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-identifier" style="color: #24292e">_1</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span> <span class="tok-number" style="color: #005cc5">2</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Rightward assignment (Ruby 3.0+)</span>
<span class="tok-number" style="color: #005cc5">42</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">=&gt;</span> <span class="tok-identifier" style="color: #24292e">answer</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Multiple assignment</span>
<span class="tok-identifier" style="color: #24292e">x</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">y</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-number" style="color: #005cc5">10</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">20</span>
<span class="tok-identifier" style="color: #24292e">x</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">y</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">y</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">x</span>  <span class="tok-comment" style="color: #6a737d;font-style:italic"># Swap</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Splat in assignment</span>
<span class="tok-identifier" style="color: #24292e">first</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-identifier" style="color: #24292e">middle</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">last</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">4</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Operator overloading</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">class</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Point</span>
  <span class="tok-identifier" style="color: #24292e">attr_accessor</span> <span class="tok-string" style="color: #032f62">:x</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-string" style="color: #032f62">:y</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">initialize</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">y</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-variable" style="color: #e36209">@x</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">x</span>
    <span class="tok-variable" style="color: #e36209">@y</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">y</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">+</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">other</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-type" style="color: #005cc5;font-weight:600">Point</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-variable" style="color: #e36209">@x</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">+</span> <span class="tok-identifier" style="color: #24292e">other</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-variable" style="color: #e36209">@y</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">+</span> <span class="tok-identifier" style="color: #24292e">other</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">-</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">other</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-type" style="color: #005cc5;font-weight:600">Point</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-variable" style="color: #e36209">@x</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">-</span> <span class="tok-identifier" style="color: #24292e">other</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">x</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-variable" style="color: #e36209">@y</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">-</span> <span class="tok-identifier" style="color: #24292e">other</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">y</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">to_s</span>
    <span class="tok-string" style="color: #032f62">&quot;(#{@x}, #{@y})&quot;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-identifier" style="color: #24292e">p1</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Point</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
<span class="tok-identifier" style="color: #24292e">p2</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-type" style="color: #005cc5;font-weight:600">Point</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">4</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
<span class="tok-identifier" style="color: #24292e">p3</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">p1</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">+</span> <span class="tok-identifier" style="color: #24292e">p2</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">p3</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Method missing</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">class</span> <span class="tok-type" style="color: #005cc5;font-weight:600">DynamicAttributes</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">method_missing</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">method</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span><span class="tok-identifier" style="color: #24292e">args</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-identifier" style="color: #24292e">method_name</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">method</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">to_s</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-identifier" style="color: #24292e">method_name</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">end_with?</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&#39;=&#39;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
      <span class="tok-identifier" style="color: #24292e">instance_variable_set</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;@#{method_name.chop}&quot;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">args</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">first</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span>
      <span class="tok-identifier" style="color: #24292e">instance_variable_get</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-string" style="color: #032f62">&quot;@#{method_name}&quot;</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
  
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">def</span> <span class="tok-identifier" style="color: #24292e">respond_to_missing?</span><span class="tok-bracket-depth-0" style="color: #d73a49">(</span><span class="tok-identifier" style="color: #24292e">method</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">include_private</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">false</span><span class="tok-bracket-depth-0" style="color: #d73a49">)</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">true</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">end</span>

<span class="tok-identifier" style="color: #24292e">obj</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-type" style="color: #005cc5;font-weight:600">DynamicAttributes</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">new</span>
<span class="tok-identifier" style="color: #24292e">obj</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">name</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;Ruby&#39;</span>
<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-identifier" style="color: #24292e">obj</span><span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">name</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic"># Tap method for debugging</span>
<span class="tok-identifier" style="color: #24292e">result</span> <span class="tok-identifier" style="color: #24292e">=</span> <span class="tok-bracket-depth-0" style="color: #d73a49">[</span><span class="tok-number" style="color: #005cc5">1</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">2</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">3</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">4</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-number" style="color: #005cc5">5</span><span class="tok-bracket-depth-0" style="color: #d73a49">]</span>
  <span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">tap</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">arr</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Original: #{arr}&quot;</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
  <span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">map</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">*</span> <span class="tok-number" style="color: #005cc5">2</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
  <span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">tap</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">arr</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Doubled: #{arr}&quot;</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
  <span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">select</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">n</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">n</span> <span class="tok-identifier" style="color: #24292e">&gt;</span> <span class="tok-number" style="color: #005cc5">5</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>
  <span class="tok-identifier" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">tap</span> <span class="tok-bracket-depth-0" style="color: #d73a49">{</span> <span class="tok-operator" style="color: #d73a49;font-weight:600">|</span><span class="tok-identifier" style="color: #24292e">arr</span><span class="tok-operator" style="color: #d73a49;font-weight:600">|</span> <span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Filtered: #{arr}&quot;</span> <span class="tok-bracket-depth-0" style="color: #d73a49">}</span>

<span class="tok-identifier" style="color: #24292e">puts</span> <span class="tok-string" style="color: #032f62">&quot;Final result: #{result}&quot;</span>
</code></pre>