<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><title>Sample JS</title><style>body{background:#fff;color:#000;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:13px;line-height:1.4;padding:1rem}.ch-pre{margin:0;white-space:pre;overflow:auto;background:#fafafa;padding:1rem;border:1px solid #e1e4e8;border-radius:6px}.ch-code{white-space:pre}span[class^=tok-]{white-space:pre-wrap}.tok-keyword{color: #d73a49;font-weight:600}.tok-string{color: #032f62}.tok-number{color: #005cc5}.tok-punctuation{color: #24292e}.tok-comment{color: #6a737d;font-style:italic}.tok-identifier{color: #24292e}</style></head><body><pre class="ch-pre"><code class="ch-code lang-javascript"><span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">interface</span> <span class="tok-identifier" style="color: #24292e">Token</span> <span class="tok-punctuation" style="color: #24292e">{</span>
  <span class="tok-identifier" style="color: #24292e">type</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-identifier" style="color: #24292e">value</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-punctuation" style="color: #24292e">}</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">interface</span> <span class="tok-identifier" style="color: #24292e">ThemeStyle</span> <span class="tok-punctuation" style="color: #24292e">{</span>
  <span class="tok-identifier" style="color: #24292e">color</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-comment" style="color: #6a737d;font-style:italic">// hex or ansi name (we&#39;ll map)</span>
  <span class="tok-identifier" style="color: #24292e">fontStyle</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;bold&#39;</span> <span class="tok-punctuation" style="color: #24292e">|</span> <span class="tok-string" style="color: #032f62">&#39;italic&#39;</span> <span class="tok-punctuation" style="color: #24292e">|</span> <span class="tok-string" style="color: #032f62">&#39;underline&#39;</span> <span class="tok-punctuation" style="color: #24292e">|</span> <span class="tok-string" style="color: #032f62">&#39;dim&#39;</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-punctuation" style="color: #24292e">}</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">interface</span> <span class="tok-identifier" style="color: #24292e">ThemeDefinition</span> <span class="tok-punctuation" style="color: #24292e">{</span>
  <span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-identifier" style="color: #24292e">tokenType</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">ThemeStyle</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-punctuation" style="color: #24292e">}</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">interface</span> <span class="tok-identifier" style="color: #24292e">HighlightOptions</span> <span class="tok-punctuation" style="color: #24292e">{</span>
  <span class="tok-identifier" style="color: #24292e">theme</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">ThemeDefinition</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-identifier" style="color: #24292e">html</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">boolean</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-comment" style="color: #6a737d;font-style:italic">// output HTML instead of ANSI if true</span>
  <span class="tok-identifier" style="color: #24292e">language</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-comment" style="color: #6a737d;font-style:italic">// specify the language for tokenization</span>
  <span class="tok-identifier" style="color: #24292e">block</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">boolean</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-comment" style="color: #6a737d;font-style:italic">// when html: wrap in &lt;pre&gt;&lt;code&gt;</span>
  <span class="tok-identifier" style="color: #24292e">fullDocument</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">boolean</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-comment" style="color: #6a737d;font-style:italic">// when html: produce full HTML document</span>
  <span class="tok-identifier" style="color: #24292e">title</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-comment" style="color: #6a737d;font-style:italic">// used if fullDocument</span>
<span class="tok-punctuation" style="color: #24292e">}</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">defaultTheme</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">ThemeDefinition</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-punctuation" style="color: #24292e">{</span>
  <span class="tok-identifier" style="color: #24292e">keyword</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-identifier" style="color: #24292e">color</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;#d73a49&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">fontStyle</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;bold&#39;</span> <span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">,</span>
  <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-identifier" style="color: #24292e">color</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;#032f62&#39;</span> <span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">,</span>
  <span class="tok-identifier" style="color: #24292e">number</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-identifier" style="color: #24292e">color</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;#005cc5&#39;</span> <span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">,</span>
  <span class="tok-identifier" style="color: #24292e">punctuation</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-identifier" style="color: #24292e">color</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;#24292e&#39;</span> <span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">,</span>
  <span class="tok-identifier" style="color: #24292e">comment</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-identifier" style="color: #24292e">color</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;#6a737d&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">fontStyle</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;italic&#39;</span> <span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">,</span>
  <span class="tok-identifier" style="color: #24292e">identifier</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-identifier" style="color: #24292e">color</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-string" style="color: #032f62">&#39;#24292e&#39;</span> <span class="tok-punctuation" style="color: #24292e">}</span>
<span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">;</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic">// --- Language registry ----------------------------------------------------</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-identifier" style="color: #24292e">type</span> <span class="tok-identifier" style="color: #24292e">Tokenizer</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">code</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">&gt;</span> <span class="tok-identifier" style="color: #24292e">Token</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">languages</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">Map</span><span class="tok-punctuation" style="color: #24292e">&lt;</span><span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">Tokenizer</span><span class="tok-punctuation" style="color: #24292e">&gt;</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">new</span> <span class="tok-identifier" style="color: #24292e">Map</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">function</span> <span class="tok-identifier" style="color: #24292e">registerLanguage</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">tokenizer</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">Tokenizer</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-identifier" style="color: #24292e">languages</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">set</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">toLowerCase</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">tokenizer</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-punctuation" style="color: #24292e">}</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">function</span> <span class="tok-identifier" style="color: #24292e">getLanguage</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">Tokenizer</span> <span class="tok-punctuation" style="color: #24292e">|</span> <span class="tok-identifier" style="color: #24292e">undefined</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-identifier" style="color: #24292e">languages</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">get</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">name</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">toLowerCase</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-punctuation" style="color: #24292e">}</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">function</span> <span class="tok-identifier" style="color: #24292e">listLanguages</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">languages</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">keys</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">sort</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-punctuation" style="color: #24292e">}</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic">// JavaScript tokenizer (baseline)</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">jsKeywordSet</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">new</span> <span class="tok-identifier" style="color: #24292e">Set</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-string" style="color: #032f62">&#39;break&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;case&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;catch&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;class&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;const&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;continue&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;debugger&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;default&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;delete&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;do&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;else&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;export&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;extends&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;finally&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;for&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;function&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;if&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;import&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;in&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;instanceof&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;let&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;new&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;return&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;super&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;switch&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;this&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;throw&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;try&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;typeof&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;var&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;void&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;while&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;with&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;yield&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;enum&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;await&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;implements&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;package&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;protected&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;static&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;interface&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;private&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span><span class="tok-string" style="color: #032f62">&#39;public&#39;</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">function</span> <span class="tok-identifier" style="color: #24292e">tokenizeJavaScript</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">code</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">Token</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span> <span class="tok-punctuation" style="color: #24292e">{</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">tokens</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">Token</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">regex</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-punctuation" style="color: #24292e">*</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-identifier" style="color: #24292e">$</span><span class="tok-punctuation" style="color: #24292e">|</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">*</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-identifier" style="color: #24292e">s</span><span class="tok-identifier" style="color: #24292e">S</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">*</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-punctuation" style="color: #24292e">*</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">|</span><span class="tok-string" style="color: #032f62">&quot;(?:\\.|[^\&quot;\\])*\&quot;|&#39;(?:\\.|[^&#39;\\])*&#39;|`(?:\\.|[^`\\])*`|\b\d+(?:\.\d+)?\b|[A-Za-z_$][A-Za-z0-9_$]*|[{}()[\].,;:+\-*/%&amp;|^!?=&lt;&gt;]|\s+/gm;
  let match: RegExpExecArray | null;
  while ((match = regex.exec(code)) !== null) {
    const value = match[0];
    let type: string;
    if (/^\/\//.test(value) || /^\/\*/.test(value)) type = &#39;comment&#39;;
    else if (/^[`&#39;\&quot;]/.test(value)) type = &#39;string&#39;;
    else if (/^\d/.test(value)) type = &#39;number&#39;;
    else if (jsKeywordSet.has(value)) type = &#39;keyword&#39;;
    else if (/^[A-Za-z_$]/.test(value)) type = &#39;identifier&#39;;
    else if (/^\s+$/.test(value)) type = &#39;whitespace&#39;;
    else type = &#39;punctuation&#39;;
    tokens.push({ type, value });
  }
  return tokens;
}

// ANSI helpers
const ansiColors: Record&lt;string, string&gt; = {
  &#39;#d73a49&#39;: &#39;\u001b[31m&#39;,
  &#39;#032f62&#39;: &#39;\u001b[34m&#39;,
  &#39;#005cc5&#39;: &#39;\u001b[36m&#39;,
  &#39;#24292e&#39;: &#39;\u001b[37m&#39;,
  &#39;#6a737d&#39;: &#39;\u001b[90m&#39;
};

function applyAnsi(style: ThemeStyle, text: string): string {
  let out = text;
  if (style.color &amp;&amp; ansiColors[style.color]) out = ansiColors[style.color] + out;
  if (style.fontStyle) {
    const map: Record&lt;string,string&gt; = {
      bold: &#39;\u001b[1m&#39;, italic: &#39;\u001b[3m&#39;, underline: &#39;\u001b[4m&#39;, dim: &#39;\u001b[2m&#39;
    };
    out = map[style.fontStyle] + out;
  }
  return out + &#39;\u001b[0m&#39;;
}
// Python tokenizer (very small subset)
const pyKeywordSet = new Set([&#39;def&#39;,&#39;return&#39;,&#39;if&#39;,&#39;elif&#39;,&#39;else&#39;,&#39;for&#39;,&#39;while&#39;,&#39;import&#39;,&#39;from&#39;,&#39;as&#39;,&#39;class&#39;,&#39;try&#39;,&#39;except&#39;,&#39;finally&#39;,&#39;with&#39;,&#39;yield&#39;,&#39;lambda&#39;,&#39;pass&#39;,&#39;break&#39;,&#39;continue&#39;,&#39;and&#39;,&#39;or&#39;,&#39;not&#39;,&#39;in&#39;,&#39;is&#39;,&#39;None&#39;,&#39;True&#39;,&#39;False&#39;]);
export function tokenizePython(code: string): Token[] {
  const tokens: Token[] = [];
  const regex = /#.*$|&quot;</span><span class="tok-string" style="color: #032f62">&quot;&quot;</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-identifier" style="color: #24292e">s</span><span class="tok-identifier" style="color: #24292e">S</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">*</span><span class="tok-punctuation" style="color: #24292e">?</span><span class="tok-string" style="color: #032f62">&quot;&quot;</span><span class="tok-string" style="color: #032f62">&quot;|&#39;&#39;&#39;[\s\S]*?&#39;&#39;&#39;|\&quot;(?:\\.|[^\&quot;\\])*\&quot;|&#39;(?:\\.|[^&#39;\\])*&#39;|\b\d+(?:\.\d+)?\b|[A-Za-z_][A-Za-z0-9_]*|[{}()[\].,;:+\-*/%&amp;|^!?=&lt;&gt;]|\s+/gm;
  let match: RegExpExecArray | null;
  while ((match = regex.exec(code)) !== null) {
    const value = match[0];
    let type: string;
    if (/^#/.test(value) || /^&quot;</span><span class="tok-string" style="color: #032f62">&quot;&quot;</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">test</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-punctuation" style="color: #24292e">|</span><span class="tok-punctuation" style="color: #24292e">|</span> <span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">^</span><span class="tok-string" style="color: #032f62">&#39;&#39;</span><span class="tok-string" style="color: #032f62">&#39;/.test(value)) type = &#39;</span><span class="tok-identifier" style="color: #24292e">comment</span><span class="tok-string" style="color: #032f62">&#39;;
    else if (/^[&quot;&#39;</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">test</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">type</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;string&#39;</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">^</span><span class="tok-identifier" style="color: #24292e">d</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">test</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">type</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;number&#39;</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">pyKeywordSet</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">has</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">type</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;keyword&#39;</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">^</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-identifier" style="color: #24292e">A</span><span class="tok-punctuation" style="color: #24292e">-</span><span class="tok-identifier" style="color: #24292e">Za</span><span class="tok-punctuation" style="color: #24292e">-</span><span class="tok-identifier" style="color: #24292e">z_</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">test</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">type</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;identifier&#39;</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">^</span><span class="tok-identifier" style="color: #24292e">s</span><span class="tok-punctuation" style="color: #24292e">+</span><span class="tok-identifier" style="color: #24292e">$</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">test</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">type</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;whitespace&#39;</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">else</span> <span class="tok-identifier" style="color: #24292e">type</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;punctuation&#39;</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-identifier" style="color: #24292e">tokens</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-identifier" style="color: #24292e">type</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">value</span> <span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-punctuation" style="color: #24292e">}</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-identifier" style="color: #24292e">tokens</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-punctuation" style="color: #24292e">}</span>

<span class="tok-comment" style="color: #6a737d;font-style:italic">// Register built-ins</span>
<span class="tok-identifier" style="color: #24292e">registerLanguage</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;javascript&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">tokenizeJavaScript</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-identifier" style="color: #24292e">registerLanguage</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;js&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">tokenizeJavaScript</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-identifier" style="color: #24292e">registerLanguage</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;python&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">tokenizePython</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-identifier" style="color: #24292e">registerLanguage</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;py&#39;</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">tokenizePython</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">function</span> <span class="tok-identifier" style="color: #24292e">escapeHtml</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">str</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span> <span class="tok-punctuation" style="color: #24292e">{</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-identifier" style="color: #24292e">str</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">replace</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-punctuation" style="color: #24292e">/</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">&amp;</span><span class="tok-punctuation" style="color: #24292e">&lt;</span><span class="tok-punctuation" style="color: #24292e">&gt;</span><span class="tok-string" style="color: #032f62">&#39;]/g, c =&gt; ({&#39;</span><span class="tok-punctuation" style="color: #24292e">&amp;</span><span class="tok-string" style="color: #032f62">&#39;:&#39;</span><span class="tok-punctuation" style="color: #24292e">&amp;</span><span class="tok-identifier" style="color: #24292e">amp</span><span class="tok-punctuation" style="color: #24292e">;</span><span class="tok-string" style="color: #032f62">&#39;,&#39;</span><span class="tok-punctuation" style="color: #24292e">&lt;</span><span class="tok-string" style="color: #032f62">&#39;:&#39;</span><span class="tok-punctuation" style="color: #24292e">&amp;</span><span class="tok-identifier" style="color: #24292e">lt</span><span class="tok-punctuation" style="color: #24292e">;</span><span class="tok-string" style="color: #032f62">&#39;,&#39;</span><span class="tok-punctuation" style="color: #24292e">&gt;</span><span class="tok-string" style="color: #032f62">&#39;:&#39;</span><span class="tok-punctuation" style="color: #24292e">&amp;</span><span class="tok-identifier" style="color: #24292e">gt</span><span class="tok-punctuation" style="color: #24292e">;</span><span class="tok-string" style="color: #032f62">&#39;,&#39;</span><span class="tok-string" style="color: #032f62">&#39;:&#39;</span><span class="tok-punctuation" style="color: #24292e">&amp;</span><span class="tok-identifier" style="color: #24292e">quot</span><span class="tok-punctuation" style="color: #24292e">;</span><span class="tok-string" style="color: #032f62">&#39;,&#39;</span><span class="tok-string" style="color: #032f62">&#39;&#39;</span><span class="tok-punctuation" style="color: #24292e">:</span><span class="tok-string" style="color: #032f62">&#39;&amp;#39;&#39;</span><span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-identifier" style="color: #24292e">c</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">!</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-punctuation" style="color: #24292e">}</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">function</span> <span class="tok-identifier" style="color: #24292e">themeToCss</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">theme</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">ThemeDefinition</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span> <span class="tok-punctuation" style="color: #24292e">{</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">parts</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">for</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">]</span> <span class="tok-identifier" style="color: #24292e">of</span> <span class="tok-identifier" style="color: #24292e">Object</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">entries</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">theme</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-punctuation" style="color: #24292e">{</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">color</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">`color: ${style.color}`</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">fontStyle</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;bold&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;font-weight:600&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">fontStyle</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;italic&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;font-style:italic&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">fontStyle</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;underline&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;text-decoration:underline&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">fontStyle</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;dim&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;opacity:0.75&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">length</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">parts</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">`.tok-${type}{${css.join(&#39;;&#39;)}}`</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-punctuation" style="color: #24292e">}</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-identifier" style="color: #24292e">parts</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">join</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-punctuation" style="color: #24292e">}</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">function</span> <span class="tok-identifier" style="color: #24292e">highlight</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">code</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">options</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">HighlightOptions</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-punctuation" style="color: #24292e">{</span><span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span> <span class="tok-punctuation" style="color: #24292e">{</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">theme</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">defaultTheme</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">options</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">theme</span><span class="tok-punctuation" style="color: #24292e">|</span><span class="tok-punctuation" style="color: #24292e">|</span><span class="tok-punctuation" style="color: #24292e">{</span><span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">langName</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">options</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">language</span> <span class="tok-punctuation" style="color: #24292e">|</span><span class="tok-punctuation" style="color: #24292e">|</span> <span class="tok-string" style="color: #032f62">&#39;javascript&#39;</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">tokenizer</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">getLanguage</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">langName</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-punctuation" style="color: #24292e">|</span><span class="tok-punctuation" style="color: #24292e">|</span> <span class="tok-identifier" style="color: #24292e">tokenizeJavaScript</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">tokens</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">tokenizer</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">code</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">options</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">html</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-punctuation" style="color: #24292e">{</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">body</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">tokens</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">map</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">t</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">&gt;</span> <span class="tok-punctuation" style="color: #24292e">{</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">type</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;whitespace&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-punctuation" style="color: #24292e">{</span>
        <span class="tok-comment" style="color: #6a737d;font-style:italic">// Preserve whitespace minimally; spaces collapse unless user wraps in &lt;pre&gt;.</span>
        <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-identifier" style="color: #24292e">escapeHtml</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-punctuation" style="color: #24292e">}</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">style</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">theme</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-punctuation" style="color: #24292e">]</span> <span class="tok-punctuation" style="color: #24292e">|</span><span class="tok-punctuation" style="color: #24292e">|</span> <span class="tok-punctuation" style="color: #24292e">{</span><span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">string</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-punctuation" style="color: #24292e">]</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">color</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">`color: ${style.color}`</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">fontStyle</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;bold&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;font-weight:600&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">fontStyle</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;italic&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;font-style:italic&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">fontStyle</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;underline&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;text-decoration:underline&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">fontStyle</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;dim&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-identifier" style="color: #24292e">css</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">push</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;opacity:0.75&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-string" style="color: #032f62">`&lt;span class=\&quot;tok-${t.type}\&quot; style=\&quot;${css.join(&#39;;&#39;)}\&quot;&gt;${escapeHtml(t.value)}&lt;/span&gt;`</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">join</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">block</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">options</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">block</span> <span class="tok-punctuation" style="color: #24292e">!</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">false</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-comment" style="color: #6a737d;font-style:italic">// default true</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">options</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">fullDocument</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-punctuation" style="color: #24292e">{</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">cssTheme</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">themeToCss</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">theme</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">title</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">escapeHtml</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">options</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">title</span> <span class="tok-punctuation" style="color: #24292e">|</span><span class="tok-punctuation" style="color: #24292e">|</span> <span class="tok-string" style="color: #032f62">`Code (${langName})`</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">content</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">block</span> <span class="tok-punctuation" style="color: #24292e">?</span> <span class="tok-string" style="color: #032f62">`&lt;pre class=\&quot;ch-pre\&quot;&gt;&lt;code class=\&quot;ch-code lang-${langName}\&quot;&gt;${body}&lt;/code&gt;&lt;/pre&gt;`</span> <span class="tok-punctuation" style="color: #24292e">:</span> <span class="tok-identifier" style="color: #24292e">body</span><span class="tok-punctuation" style="color: #24292e">;</span>
      <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-string" style="color: #032f62">`&lt;!DOCTYPE html&gt;&lt;html lang=\&quot;en\&quot;&gt;&lt;head&gt;&lt;meta charset=\&quot;utf-8\&quot;/&gt;&lt;title&gt;${title}&lt;/title&gt;&lt;style&gt;body{background:#fff;color:#000;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:13px;line-height:1.4;padding:1rem}.ch-pre{margin:0;white-space:pre;overflow:auto;background:#fafafa;padding:1rem;border:1px solid #e1e4e8;border-radius:6px}.ch-code{white-space:pre}span[class^=tok-]{white-space:pre-wrap}${cssTheme}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;${content}&lt;/body&gt;&lt;/html&gt;`</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-punctuation" style="color: #24292e">}</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">block</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-string" style="color: #032f62">`&lt;pre class=\&quot;ch-pre\&quot;&gt;&lt;code class=\&quot;ch-code lang-${langName}\&quot;&gt;${body}&lt;/code&gt;&lt;/pre&gt;`</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-identifier" style="color: #24292e">body</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-punctuation" style="color: #24292e">}</span>
  <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-identifier" style="color: #24292e">tokens</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">map</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">t</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">&gt;</span> <span class="tok-punctuation" style="color: #24292e">{</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">if</span> <span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">type</span> <span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span><span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-string" style="color: #032f62">&#39;whitespace&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-identifier" style="color: #24292e">t</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-punctuation" style="color: #24292e">;</span> <span class="tok-comment" style="color: #6a737d;font-style:italic">// no styling</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">const</span> <span class="tok-identifier" style="color: #24292e">style</span> <span class="tok-punctuation" style="color: #24292e">=</span> <span class="tok-identifier" style="color: #24292e">theme</span><span class="tok-punctuation" style="color: #24292e">[</span><span class="tok-identifier" style="color: #24292e">t</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">type</span><span class="tok-punctuation" style="color: #24292e">]</span> <span class="tok-punctuation" style="color: #24292e">|</span><span class="tok-punctuation" style="color: #24292e">|</span> <span class="tok-punctuation" style="color: #24292e">{</span><span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">;</span>
    <span class="tok-keyword" style="color: #d73a49;font-weight:600">return</span> <span class="tok-identifier" style="color: #24292e">applyAnsi</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-identifier" style="color: #24292e">style</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">t</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">value</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
  <span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">.</span><span class="tok-identifier" style="color: #24292e">join</span><span class="tok-punctuation" style="color: #24292e">(</span><span class="tok-string" style="color: #032f62">&#39;&#39;</span><span class="tok-punctuation" style="color: #24292e">)</span><span class="tok-punctuation" style="color: #24292e">;</span>
<span class="tok-punctuation" style="color: #24292e">}</span>

<span class="tok-keyword" style="color: #d73a49;font-weight:600">export</span> <span class="tok-keyword" style="color: #d73a49;font-weight:600">default</span> <span class="tok-punctuation" style="color: #24292e">{</span> <span class="tok-identifier" style="color: #24292e">highlight</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">tokenizeJavaScript</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">tokenizePython</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">registerLanguage</span><span class="tok-punctuation" style="color: #24292e">,</span> <span class="tok-identifier" style="color: #24292e">listLanguages</span> <span class="tok-punctuation" style="color: #24292e">}</span><span class="tok-punctuation" style="color: #24292e">;</span>
</code></pre></body></html>